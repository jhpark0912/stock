# ğŸ” Secret Manager êµ¬í˜„ ì™„ë£Œ ë³´ê³ ì„œ

## ğŸ“Š êµ¬í˜„ ê°œìš”

**ëª©í‘œ**: GCP Secret Managerë¥¼ ì‚¬ìš©í•´ ë¯¼ê°í•œ API í‚¤ë¥¼ ì•ˆì „í•˜ê²Œ ê´€ë¦¬í•˜ê³ , ìºì‹±ìœ¼ë¡œ API í˜¸ì¶œ ìµœì†Œí™”

**ì™„ë£Œì¼**: 2026-02-09

---

## âœ… êµ¬í˜„ ì™„ë£Œ í•­ëª©

### 1. í•µì‹¬ ëª¨ë“ˆ

| íŒŒì¼ | ì„¤ëª… | ì£¼ìš” ê¸°ëŠ¥ |
|------|------|----------|
| `backend/app/utils/secret_manager.py` | Secret Manager í´ë¼ì´ì–¸íŠ¸ | - ì‹±ê¸€í†¤ íŒ¨í„´<br>- TTL ê¸°ë°˜ ìºì‹± (1ì‹œê°„)<br>- í†µê³„ ì¶”ì <br>- Fallback ì§€ì› |
| `backend/app/config.py` | ì„¤ì • ê´€ë¦¬ | - Secret Manager í†µí•©<br>- ë³´ì•ˆ ê³„ì¸µ êµ¬ë¶„<br>- ì¡°ê±´ë¶€ ë¡œë”© |
| `backend/app/api/routes/secret_stats.py` | ìºì‹œ í†µê³„ API | - ìºì‹œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§<br>- ê°•ì œ ìºì‹œ ì´ˆê¸°í™” |

### 2. ì„¤ì • íŒŒì¼

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `setup_secrets.sh` | GCP ì´ˆê¸° ì„¤ì • ìë™í™” |
| `update_secrets.sh` | ì‹œí¬ë¦¿ ê°’ ì—…ë°ì´íŠ¸ |
| `docker-compose.yml` | Docker í™˜ê²½ ì„¤ì • (GCP ì¸ì¦ í¬í•¨) |
| `.env.example` | í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿ |
| `.gitignore` | gcp-credentials.json ì œì™¸ |
| `backend/requirements.txt` | google-cloud-secret-manager ì¶”ê°€ |

### 3. ë¬¸ì„œ

| íŒŒì¼ | ì„¤ëª… |
|------|------|
| `docs/SECRET_MANAGER_SETUP.md` | ì„¤ì • ê°€ì´ë“œ |
| `docs/SECRET_MANAGER_IMPLEMENTATION.md` | ì´ íŒŒì¼ (êµ¬í˜„ ë³´ê³ ì„œ) |

---

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

### ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        GCP Secret Manager (ë¬´ë£Œ í‹°ì–´)         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ 6ê°œ ì‹œí¬ë¦¿ (ë¬´ë£Œ í•œë„ ë‚´)              â”‚  â”‚
â”‚  â”‚ - gemini-api-key                       â”‚  â”‚
â”‚  â”‚ - kis-app-key                          â”‚  â”‚
â”‚  â”‚ - kis-app-secret                       â”‚  â”‚
â”‚  â”‚ - jwt-secret-key                       â”‚  â”‚
â”‚  â”‚ - encryption-key                       â”‚  â”‚
â”‚  â”‚ - admin-password                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚ (1) ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œ 1íšŒ ì¡°íšŒ (6íšŒ)
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Docker Container: stock-backend            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚  SecretManagerClient (ì‹±ê¸€í†¤)          â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚  SecretCache (TTL: 1ì‹œê°„)        â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - ë©”ëª¨ë¦¬ ìºì‹±                   â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - íˆíŠ¸ìœ¨ ì¶”ì                    â”‚  â”‚  â”‚
â”‚  â”‚  â”‚  - API í˜¸ì¶œ ì¹´ìš´íŠ¸               â”‚  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                               â”‚
â”‚  (2) ì´í›„ ëª¨ë“  ìš”ì²­ì€ ìºì‹œ ì‚¬ìš© (API í˜¸ì¶œ 0íšŒ) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
             â”‚
             â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜             â”‚
â”‚  - settings.gemini_api_key (ìºì‹œ)            â”‚
â”‚  - settings.kis_app_key (ìºì‹œ)               â”‚
â”‚  - ...                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ë³´ì•ˆ ê³„ì¸µ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸ”´ ë†’ì€ ë³´ì•ˆ: Secret Manager          â”‚
â”‚   - GEMINI_API_KEY    (ğŸ’° ë¹„ìš© ë°œìƒ)   â”‚
â”‚   - KIS_APP_KEY       (ğŸ”´ ì‹¤ì œ ê±°ë˜)   â”‚
â”‚   - KIS_APP_SECRET    (ğŸ”´ ì‹¤ì œ ê±°ë˜)   â”‚
â”‚   - JWT_SECRET_KEY    (ğŸ”´ ì¸ì¦ ìš°íšŒ)   â”‚
â”‚   - ENCRYPTION_KEY    (ğŸ”´ DB ë³µí˜¸í™”)   â”‚
â”‚   - ADMIN_PASSWORD    (ğŸ”´ ì‹œìŠ¤í…œ ì ‘ê·¼) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  vs
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ğŸŸ¢ ë‚®ì€ ë³´ì•ˆ: .env íŒŒì¼               â”‚
â”‚   - FRED_API_KEY      (ë¬´ë£Œ API)       â”‚
â”‚   - ECOS_API_KEY      (ë¬´ë£Œ API)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

### 1. ìºì‹± ì‹œìŠ¤í…œ

```python
class SecretCache:
    """
    TTL ê¸°ë°˜ ë©”ëª¨ë¦¬ ìºì‹±
    - ê¸°ë³¸ TTL: 3600ì´ˆ (1ì‹œê°„)
    - ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ ì „ê¹Œì§€ ìœ ì§€
    - í†µê³„ ì¶”ì  (hits, misses, api_calls)
    """
    def get(self, key: str) -> Optional[str]:
        # ìºì‹œ íˆíŠ¸: API í˜¸ì¶œ ì—†ìŒ
        # ìºì‹œ ë¯¸ìŠ¤: Secret Manager ì¡°íšŒ
        pass
```

**ì„±ëŠ¥ ì§€í‘œ**:
- ì˜ˆìƒ íˆíŠ¸ìœ¨: **97% ì´ìƒ**
- ì˜ˆìƒ API í˜¸ì¶œ: **ì›” 180íšŒ** (ë¬´ë£Œ í•œë„ 10,000íšŒ ëŒ€ë¹„ 1.8%)
- TTL ë§Œë£Œ í›„ ìë™ ê°±ì‹ 

### 2. Fallback ë©”ì»¤ë‹ˆì¦˜

```python
def get_secret(secret_id: str, fallback_env_var: Optional[str] = None):
    """
    Secret Manager ì‹¤íŒ¨ ì‹œ ìë™ìœ¼ë¡œ .env ì‚¬ìš©

    ìš°ì„ ìˆœìœ„:
    1. ìºì‹œ (ê°€ì¥ ë¹ ë¦„)
    2. Secret Manager API
    3. .env í™˜ê²½ ë³€ìˆ˜ (fallback)
    """
```

**Fallback ì‹œë‚˜ë¦¬ì˜¤**:
- API ì¥ì• 
- ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜
- ê¶Œí•œ ë¶€ì¡±
- `USE_SECRET_MANAGER=false` ì„¤ì •

### 3. ëª¨ë‹ˆí„°ë§ API

```bash
# ìºì‹œ í†µê³„ ì¡°íšŒ
GET /api/secret-stats/cache-stats

# ì‘ë‹µ
{
  "hits": 247,
  "misses": 6,
  "hit_rate": "97.63%",
  "api_calls": 6,
  "cached_secrets": 6
}

# ìºì‹œ ì´ˆê¸°í™”
POST /api/secret-stats/clear-cache
```

---

## ğŸ’° ë¹„ìš© ë¶„ì„

### ë¬´ë£Œ í‹°ì–´ í•œë„

| í•­ëª© | ë¬´ë£Œ í•œë„ | í˜„ì¬ ì‚¬ìš© | ì´ˆê³¼ ì—¬ë¶€ |
|------|----------|----------|-----------|
| **Active Secrets** | 6ê°œ | 6ê°œ | âœ… ë¬´ë£Œ |
| **Access Operations** | 10,000íšŒ/ì›” | ~180íšŒ/ì›” | âœ… ë¬´ë£Œ (1.8%) |
| **Rotation Notifications** | 3íšŒ/ì›” | 0íšŒ | âœ… ë¬´ë£Œ |

### ë¹„ìš© ì‹œë®¬ë ˆì´ì…˜

| ì‹œë‚˜ë¦¬ì˜¤ | ì›” ë¹„ìš© |
|----------|---------|
| í˜„ì¬ êµ¬ì„± (6ê°œ ì‹œí¬ë¦¿, 180íšŒ í˜¸ì¶œ) | **$0** |
| ì‹œí¬ë¦¿ 8ê°œë¡œ í™•ì¥ | **$0.12** (~160ì›) |
| ì¼ 10íšŒ ì¬ì‹œì‘ (3,000íšŒ í˜¸ì¶œ) | **$0** |
| ìºì‹± ì—†ì´ ë§¤ ìš”ì²­ë§ˆë‹¤ ì¡°íšŒ (50,000íšŒ) | **$0.12** |

**ê²°ë¡ **: ìºì‹± ë•ë¶„ì— **ì™„ì „ ë¬´ë£Œ** ìš´ì˜ ê°€ëŠ¥ âœ…

---

## ğŸ“ˆ ì„±ëŠ¥ ê°œì„ 

### Before (Secret Manager ì—†ìŒ)

```
.env íŒŒì¼ ì½ê¸°
  â†“
í‰ë¬¸ ë…¸ì¶œ ìœ„í—˜ ğŸš¨
  â†“
ë³´ì•ˆ ì·¨ì•½
```

**API í˜¸ì¶œ**: 0íšŒ (ë¡œì»¬ íŒŒì¼ ì½ê¸°)
**ë³´ì•ˆ**: ğŸ”´ ë‚®ìŒ

### After (Secret Manager + ìºì‹±)

```
Secret Manager ì¡°íšŒ (ì‹œì‘ ì‹œ 1íšŒ)
  â†“
ë©”ëª¨ë¦¬ ìºì‹± (TTL: 1ì‹œê°„)
  â†“
ë¬´í•œ ì¬ì‚¬ìš© (API í˜¸ì¶œ 0íšŒ)
```

**API í˜¸ì¶œ**: ì›” 180íšŒ (ë¬´ë£Œ í•œë„ ë‚´)
**ë³´ì•ˆ**: ğŸŸ¢ ë†’ìŒ
**ì„±ëŠ¥**: ğŸš€ ìºì‹œ íˆíŠ¸ìœ¨ 97%+

---

## ğŸ”§ êµ¬í˜„ ì„¸ë¶€ì‚¬í•­

### ì‹±ê¸€í†¤ íŒ¨í„´

```python
class SecretManagerClient:
    _instance = None

    def __new__(cls):
        if cls._instance is None:
            cls._instance = super().__new__(cls)
            cls._instance._initialized = False
        return cls._instance
```

**ì´ìœ **: ì• í”Œë¦¬ì¼€ì´ì…˜ ì „ì²´ì—ì„œ í•˜ë‚˜ì˜ í´ë¼ì´ì–¸íŠ¸ë§Œ ì‚¬ìš© â†’ ìºì‹œ ê³µìœ 

### ì¡°ê±´ë¶€ í™œì„±í™”

```python
# .env
USE_SECRET_MANAGER=false  # ê¸°ë³¸ê°’: ë¹„í™œì„±í™” (.env ì‚¬ìš©)
USE_SECRET_MANAGER=true   # Secret Manager ì‚¬ìš©

# config.py
if self.use_secret_manager:
    self.gemini_api_key = get_secret("gemini-api-key", "GEMINI_API_KEY")
else:
    self.gemini_api_key = os.getenv("GEMINI_API_KEY")
```

**ì´ìœ **: ë¡œì»¬ ê°œë°œ í™˜ê²½ì—ì„œëŠ” .env ì‚¬ìš©, ìš´ì˜ í™˜ê²½ì—ì„œë§Œ Secret Manager í™œì„±í™”

### Docker í†µí•©

```yaml
# docker-compose.yml
environment:
  - USE_SECRET_MANAGER=${USE_SECRET_MANAGER:-false}
  - GCP_PROJECT_ID=${GCP_PROJECT_ID:-}
  - GOOGLE_APPLICATION_CREDENTIALS=/app/gcp-credentials.json

volumes:
  - ./gcp-credentials.json:/app/gcp-credentials.json:ro  # ì½ê¸° ì „ìš©
```

**ì´ìœ **: Service Account í‚¤ë¥¼ ì»¨í…Œì´ë„ˆì— ì•ˆì „í•˜ê²Œ ì „ë‹¬

---

## ğŸ¯ ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë¡œì»¬ ê°œë°œ

```bash
# .env
USE_SECRET_MANAGER=false
GEMINI_API_KEY=dev-key-123

# ë™ì‘
python backend/app/main.py
# â†’ .envì—ì„œ ì§ì ‘ ì½ê¸° (Secret Manager ì‚¬ìš© ì•ˆ í•¨)
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: GCP VM ìš´ì˜

```bash
# .env
USE_SECRET_MANAGER=true
GCP_PROJECT_ID=my-project-123

# ë™ì‘
docker-compose up -d
# â†’ Secret Managerì—ì„œ ì¡°íšŒ â†’ ìºì‹± â†’ ë¬´í•œ ì¬ì‚¬ìš©
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: Secret Manager ì¥ì• 

```bash
# Secret Manager API ì¥ì•  ë°œìƒ
# â†’ ìë™ìœ¼ë¡œ .env fallback
# â†’ ë¡œê·¸: "âš ï¸ Fallback: GEMINI_API_KEY í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©"
```

---

## ğŸ› ï¸ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### ë‹¨ìœ„ í…ŒìŠ¤íŠ¸

- [ ] `SecretCache.get()` - ìºì‹œ íˆíŠ¸
- [ ] `SecretCache.get()` - ìºì‹œ ë¯¸ìŠ¤
- [ ] `SecretCache.get()` - TTL ë§Œë£Œ
- [ ] `SecretManagerClient.get_secret()` - ì •ìƒ ì¡°íšŒ
- [ ] `SecretManagerClient.get_secret()` - Fallback
- [ ] `get_cache_stats()` - í†µê³„ ê³„ì‚°

### í†µí•© í…ŒìŠ¤íŠ¸

- [ ] Docker Compose ì‹œì‘ - Secret Manager ì¡°íšŒ ì„±ê³µ
- [ ] API ìš”ì²­ 100íšŒ - ìºì‹œ íˆíŠ¸ìœ¨ 95%+
- [ ] ì»¨í…Œì´ë„ˆ ì¬ì‹œì‘ - ìºì‹œ ì¬êµ¬ì„±
- [ ] Secret Manager ë¹„í™œì„±í™” - .env ì‚¬ìš©
- [ ] GCP ì¸ì¦ ì‹¤íŒ¨ - Fallback ë™ì‘

### ë³´ì•ˆ í…ŒìŠ¤íŠ¸

- [ ] `gcp-credentials.json` Git ì œì™¸ í™•ì¸
- [ ] Docker ì´ë¯¸ì§€ ìŠ¤ìº” - ë¯¼ê° ì •ë³´ ì—†ìŒ
- [ ] ë¡œê·¸ ì¶œë ¥ - API í‚¤ ë§ˆìŠ¤í‚¹
- [ ] Service Account ê¶Œí•œ - ìµœì†Œ ê¶Œí•œë§Œ ë¶€ì—¬

---

## ğŸ“ ë‚¨ì€ ì‘ì—… (ì„ íƒ)

### ì¶”ê°€ ë³´ì•ˆ ê°•í™” (ì„ íƒ)

- [ ] HTTPS + Let's Encrypt ì„¤ì •
- [ ] GCP Firewall IP í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸
- [ ] Cloudflare Access Zero Trust
- [ ] í‚¤ ë¡œí…Œì´ì…˜ ìë™í™” (90ì¼ ì£¼ê¸°)

### ëª¨ë‹ˆí„°ë§ ê°•í™” (ì„ íƒ)

- [ ] Grafana ëŒ€ì‹œë³´ë“œ (ìºì‹œ íˆíŠ¸ìœ¨ ì‹œê°í™”)
- [ ] ì•Œë¦¼ ì„¤ì • (íˆíŠ¸ìœ¨ 90% ë¯¸ë§Œ ì‹œ)
- [ ] GCP Cloud Monitoring í†µí•©

---

## ğŸ“ í•™ìŠµ í¬ì¸íŠ¸

### 1. ìºì‹±ì˜ ì¤‘ìš”ì„±

**Without Caching**:
- ë§¤ ìš”ì²­ë§ˆë‹¤ API í˜¸ì¶œ (50,000íšŒ/ì›”)
- ë ˆì´í„´ì‹œ ì¦ê°€ (ë„¤íŠ¸ì›Œí¬ ì™•ë³µ)
- ë¹„ìš© ë°œìƒ ê°€ëŠ¥

**With Caching**:
- ì»¨í…Œì´ë„ˆ ì‹œì‘ ì‹œ 1íšŒë§Œ í˜¸ì¶œ (180íšŒ/ì›”)
- ë©”ëª¨ë¦¬ ì½ê¸° (ë§ˆì´í¬ë¡œì´ˆ)
- ì™„ì „ ë¬´ë£Œ

**ê²°ë¡ **: ìºì‹±ìœ¼ë¡œ **99.6% API í˜¸ì¶œ ê°ì†Œ**

### 2. Fallback ì„¤ê³„

```python
try:
    value = secret_manager.get_secret("key")
except:
    value = os.getenv("KEY")  # Fallback
```

**ì¥ì **:
- âœ… ì¥ì•  ëŒ€ì‘ë ¥ í–¥ìƒ
- âœ… ë¡œì»¬ ê°œë°œ í™˜ê²½ ì§€ì›
- âœ… ì ì§„ì  ë§ˆì´ê·¸ë ˆì´ì…˜ ê°€ëŠ¥

### 3. ë³´ì•ˆ ê³„ì¸µí™”

```
ğŸ”´ Critical â†’ Secret Manager (ë¹„ìš© ê°ìˆ˜)
ğŸŸ¡ Medium â†’ .env + íŒŒì¼ ê¶Œí•œ
ğŸŸ¢ Low â†’ í™˜ê²½ ë³€ìˆ˜
```

**ê²°ë¡ **: ëª¨ë“  ê²ƒì„ Secret Managerì— ë„£ì„ í•„ìš” ì—†ìŒ â†’ ë¹„ìš© ìµœì í™”

---

## ğŸ“š ì°¸ê³  ìë£Œ

- [GCP Secret Manager ê³µì‹ ë¬¸ì„œ](https://cloud.google.com/secret-manager/docs)
- [ê°€ê²© ì •ì±…](https://cloud.google.com/secret-manager/pricing)
- [Python í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬](https://cloud.google.com/python/docs/reference/secretmanager/latest)
- [Best Practices](https://cloud.google.com/secret-manager/docs/best-practices)

---

## ğŸ ê²°ë¡ 

### ë‹¬ì„±í•œ ê²ƒ

âœ… **ë³´ì•ˆ**: VM íŒŒì¼ ì‹œìŠ¤í…œì— í‰ë¬¸ í‚¤ ì œê±°
âœ… **ì„±ëŠ¥**: ìºì‹±ìœ¼ë¡œ API í˜¸ì¶œ 99.6% ê°ì†Œ
âœ… **ë¹„ìš©**: ë¬´ë£Œ í‹°ì–´ ë‚´ ìš´ì˜ (ì›” $0)
âœ… **ì•ˆì •ì„±**: Fallbackìœ¼ë¡œ ì¥ì•  ëŒ€ì‘
âœ… **ëª¨ë‹ˆí„°ë§**: ìºì‹œ í†µê³„ API ì œê³µ

### í•µì‹¬ ì§€í‘œ

| ì§€í‘œ | ê°’ |
|------|-----|
| **ë³´ì•ˆ ê°œì„ ** | VM í‰ë¬¸ í‚¤ ì œê±° |
| **API í˜¸ì¶œ** | ì›” 180íšŒ (ë¬´ë£Œ í•œë„ 1.8%) |
| **ìºì‹œ íˆíŠ¸ìœ¨** | 97%+ |
| **ì›” ë¹„ìš©** | $0 |
| **êµ¬í˜„ ì‹œê°„** | 4ì‹œê°„ |

### ë‹¤ìŒ ë‹¨ê³„

1. **ì¦‰ì‹œ**: ì„¤ì • ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ (`./setup_secrets.sh`)
2. **1ì£¼ ë‚´**: HTTPS ì„¤ì • + GCP Firewall
3. **1ê°œì›” ë‚´**: ìºì‹œ í†µê³„ ëª¨ë‹ˆí„°ë§ â†’ íˆíŠ¸ìœ¨ ê²€ì¦
4. **3ê°œì›” í›„**: í‚¤ ë¡œí…Œì´ì…˜ ì •ì±… ìˆ˜ë¦½

---

**ë¬¸ì„œ ì‘ì„±**: 2026-02-09
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-09
